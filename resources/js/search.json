[[{"l":"Dokumentation Melissa Burgstaller"},{"l":"Projekt „Gutscheinsystem“"},{"l":"Das Grundkonzept","p":["An der HAK Zell am See sollen Schüler und Schülerinnen für besondere Leistungen oder Engagement belohnt werden können. Wenn jemand einen guten oder sogar einen ausgezeichneten Erfolg im Jahreszeugnis erreicht, soll er/sie einen Gutschein für einen oder mehrere freie Unterrichtstage erhalten. Das gleiche Prinzip gilt für fleißige Schüler, welche bei schulischen Veranstaltungen mithelfen. Es soll aber möglich sein, einen Gutschein für einen freien Nachmittag zu vergeben. Das heißt es muss möglich sein zwischen Tag(e), Nachmittag(e) und eventuell auch Stunde(n) auszuwählen."]},{"l":"Benutzerrollen und Berechtigungen","p":["Dafür wird eine Website entwickelt, auf die Lehrpersonen, das Sekretariat sowie Direktor Hauer Zugriff haben. Es haben jedoch nicht alle Lehrer die Berechtigung Gutscheine zu erstellen, bearbeiten und zu löschen. Das Sekretariat und der Direktor haben eine andere Oberfläche, das heißt sie haben eine Übersicht über alle Gutscheine. Sie können alle verwalten. Bei Lehrern soll es anderes gehandhabt werden: Grunsätzlich haben alle KVs die Berechtigung Gutscheine zu erstellen. Standardmäßig sind auch nur diese Lehrer im System eingespeichert. Wenn jedoch mal eine Schulveranstaltung ist, kann der verantwortliche Lehrer auch durch das Sekretariat oder den Direktor im Nachhinein hinzugefügt werden. Denn bei Veranstaltungen gibt es immer verantwortliche Lehrer und diese sollen dann auch die Berechtigung haben Gutscheine für das Helfen bei dem Event zuzuweisen, weil dies in ihren Arbeitsaufgaben liegt."]},{"l":"Erstellung von Gutscheinen","p":["Der Fokus von meinem Projekt liegt nämlich darin, dass die Benutzung des Programmes so einfach und schnell wie möglich funktioniert. Beim Erstellen eines Gutscheines soll es die Möglichkeit geben mehrere \"gleiche\" Gutscheine gleichzeitig zu erstellen. Das heißt man kann aus Sokrates die jeweiligen Matrikelnummern heraussuchen und diese dann anschließend in meinem Programm eingeben, in einem Textfeld. Dann sollte man ein Template auswählen können, wie zum Beispiel \"ausgezeichneter Erfolg\", \"guter Erfolg\", \"für Veranstaltung\" und eines wo man \"Grund\" individuell hineinschreiben kann. Ebenso sollte bei der PDF das Logo auswählbar sein zwischen 2 Logos, aber immer an der gleichen Stelle bei der PDF. Die Gültigkeit des Gutscheins sollte ebenso auswählbar sein. Ich würde eine Frist setzen, wie zum Beispiel: muss bis Ende des Schuljahres xx/xx eingelöst werden. Das heißt man kann zwischen verschiedenen Jahreszahlen auswählen (2027/28, 2028/29, ...). Ansonsten soll es bei dem Templates immer ein Standard-Text sein. Durch die Digitalisierung fällt natürlich die Unterschrift und der Stempel vom Direktor weg. Dies würde ich mit einem Zeitstempel mit Datum und Uhrzeit lösen (wie bei ID-Austria - so ähnlich zumindest)"]},{"l":"Schülerverwaltung","p":["Wie schon angesprochen, jeder Gutschein wird eindeutig einem Schüler oder einer Schülerin zugeordnet. Die Zuordnung erfolgt über die Matrikelnummer beziehungsweise Schüler-ID. Dadurch ist sichergestellt, dass Gutscheine nicht übertragbar oder verschenkbar sind. Jedoch sind nicht alle Schüler standardmäßig im System gespeichert. Wenn man die oben genannten Daten eingeben hat (Matrikelnummern) und auf Submit geht, öffnet sich die Ansicht, wo man die genaueren Daten sieht/angeben muss. Das heißt Vorname, Nachname, Klasse und Geburtsdatum. Wenn man eine Matrikelnummer und die dazugehörigen Daten schonmal eingegeben hat, hat es das System schon gespeichert und füllt es nun automatisch aus. Ansonsten beim ersten Mal Einfüllen gibt es dann immer die Option den Schüler für das zukünftige Verwenden zu speichern. Dann muss man beim nächsten Mal nur die Matrikelnummer eingeben und das System füllt automatisch die ganzen weiteren Daten standardmäßig aus (sprich Vorname + Nachname + Geburtsdatum). Die Klasse muss man immer selber ausfüllen, denn diese verändert sich ja jährlich."]},{"l":"Genehmigungsprozess und Versand","p":["Sobald ein Gutschein erstellt wird, muss diese \"Anfrage\" erst vom Sekretariat oder vom Direktor genehmigt werden. Anschließend erhält der betreffende Schüler eine E-Mail an seine jeweilige Schul-E-Mail-Adresse. In dieser E-Mail befindet sich der Gutschein als PDF-Dokument, sodass er nicht verloren gehen kann. Auf dem PDF stehen alle wichtigen Informationen wie Vorname, Nachname, Geburtsdatum, aktuelle Klasse, Grund für den Gutschein, Ausstellungsdatum sowie die Anzahl der freien Tage, Nachmittage oder Stunden. Je nachdem was der Lehrer oben ausgewählt hat. Zusätzlich wird vermerkt, bis wann der Gutschein gültig ist (das was der Lehrer eingegeben hat), einmalig eingelöst werden kann und nur nach Absprache mit dem jeweiligen Klassenvorstand genutzt werden darf."]},{"l":"QR-Code und Einlösung","p":["Jeder Gutschein bekommt zusätzlich einen individuellen QR-Code. Der Code ist ebenso auf der PDF-Datei abgebildet. Dieser kann später mit einem eigenen Tool, zum Beispiel über ein Handy, gescannt werden. Beim Scannen wird der Gutschein automatisch im System als eingelöst markiert. Dabei wird auch gespeichert, welche Lehrperson den Gutschein eingelöst beziehungsweise gescannt hat. Nach der Einlösung bleibt der Gutschein bis zum Ablauf der Gültigkeit im System gespeichert, anschließend nach Ablauf der Frist wird das PDF gelöscht - die Daten werden jedoch in einem Archiv 5 Jahre lang gespeichert - sprich Aussteller, Vorname, Nachname, Klasse, Grund, Ausstellungsdatum, eingelöst ja oder nein, usw. Nach Ablauf der 5 Jahre werden die Daten automatisch gelöscht."]},{"l":"Archivierung von Schülerdaten","p":["Bei einem Schüler gilt das gleiche - wie schon erwähnt, können die Daten vom Schüler nach einmaliger Verwendung im System gespeichert werden und das System sucht bei der erneuten Eingabe der gleichen Matrikelnummer die Daten automatisch heraus und fügt sie ein. Der Schüler wird ab der ersten Speicherung ebenso 5 Jahre im Archiv gespeichert und dann automatisch gelöscht."]}],[{"l":"2026-02-18 - 3 UE"},{"l":"Installation","p":["Mein Laravel-Projekt habe ich lokal im Herd-Ordner erstellt. Dabei wurde folgender Befehl verwendet:","Bei der Installation habe ich Livewire als Starter Kit gewählt, ebenso habe ich die Laravel built-in authentication ausgewählt. Ansonsten habe ich nichts ausgewählt.","Das Git-Repository habe ich manuell initialisiert und habe es mit dem Github-Classroom verbunden.","Anschließend wurden automatisch die notwendigen Abhängigkeiten, wie composer install, sowie npm install und npm run build installiert."]},{"l":"Struktur","p":["Das Projekt befindet ich im Herd-Ordner auf meinem Laptop und wird lokal über Herd ausgeführt. Meine Website ist derzeit unter dieser URL erreichbar:"]},{"l":"Grundkonzept","p":["In den heutigen Stunde habe ich mich grundsätzlich erstmal mit dem Grunkonzept beschäftigt, damit ich danach effizient arbeiten kann. Also musste ich erstmal überlegen, wie ich das Projekt umsetzen werde, danach habe ich das komplette Grundkonzept dokumentiert."]},{"l":"Gutscheine - alle wichtigen Infos","p":["Ich habe festgelegt, dass unterscheidliche Gutscheinarten vergeben werden können, nämlich ganze Tage, einzelne Nachmittage oder Stunden. Zudem habe ich mir ein Rollen- und Berechtigungssystem überlegt, bei dem Klassenvorstände, Lehrpersonen, das Sekretariat und die Direktion unterschiedliche Zugriffsrechte erhalten. Darüber hinaus wurde ein Genehmigungsprozess eingeplant, sodass ein Gutschein vor dem Versand an den Schüler zunächst von der Direktion oder dem Sekretariat freigegeben werden muss. Die Erstellung mehrerer Gutscheine gleichzeitig soll möglich sein, indem mehrere Matrikelnummern eingegeben werden. Für die Ausstellung des Gutscheines stehen verschiedene Templates mit Standardtexten zur Verfügung, wobei auch individuelle Gründe ergänzt werden können. Jeder Gutschein erhält einen individuellen QR-Code zur späteren Einlösung. Zusätzlich wurde ein Archivierungs- und Löschkonzept definiert, nach dem Gutscheindaten sowie Schülerdaten für fünf Jahre gespeichert und anschließend automatisch gelöscht werden."]},{"l":"Aufbau der Datenbankstruktur","p":["Ich habe meine Datenbank mit SQLite eingerichtet."]},{"l":"Abschluss der UE","p":["Damit sind die Grundlage des Projekts und das Konzept festgelegt und die technische Basis für die weitere Umsetzung vorbereitet."]}],[{"l":"2026-02-25 - 4 UE"},{"l":"Migrationen"},{"l":"User Migration","p":["Ich habe mit der Umsetzung der Benutzerstruktur angefangen. Ich habe zwei neue Felder zu users hinzugefügt:","role: Um zwischen Lehrer, Sekretariat und Direktor zu unterscheiden zu können. Das sind quasi die Benutzerrollen (für Rechteprüfung später).","can_issue_vouchers: Um festzulegen, ob eine Lehrperson berechtigt ist, Gutscheine zu erstellen oder eben nicht. Man kann ihnen später die Berechtigung geben und dann wieder wegnehmen.","All das habe ich in dieser Migration gemacht:"]},{"l":"Student Migration","p":["Mit diesem Befehl habe ich Student.php erstellt:","Dadurch habe ich auch Migration create_students_table.php automatisch erstellt.","Dann habe ich mir überlegt, welche Felder ich beim Schüler hinzufügen soll: id: Primärschlüssel","student_id: Matrikelnummer (jede Schüler hat eine individuelle)","first_name: Vorname","last_name: Nachname","birthdate: Geburtsdatum","timestamps: Zeit der Erstellung","Ich habe die Klasse bewusst nicht beim Schüler dazugespeichert, da sich die Klasse ja jährlich verändert, außer der Schüler bleibt sitzen. Die Klasse werde ich später direkt beim Gutschein speichern. Dann habe ich Migration ausgeführt php artisan migrate.","Dann habe ich nochmal nachgedacht und bin draufgekommen, dass jeder Schüler ja auch eine E-Mail hat. Dann habe ich die students-Tabelle um das Feld email erweitert, welches unique ist, durch diese neue Migration:","Danach habe ich nochmal php artisan migrate gemacht."]},{"l":"Voucher Migration","p":["Abgeschlossen habe ich das mit php artisan migrate.","Als erstes habe ich wieder model und migration erstellt:","amount: Anzahl der in type gewählten Einheit","approved_at Zeitpunkt der Genehmigung","approved: genehmigt","code: UUID Universally Unique Identifier (weltweit eindeutige Identifikationsnummer)","Dann habe ich mir die Werte für einen voucher überlegt und abgeglichen mit meinem Grundkonzept:","expired: abgelaufen","expires_at: Ablaufdatum genau (zum Rechnen)","foreignId('approved_by_user_id'): speichert, welche berechtigte Person den Gutschein genehmigt hat.","foreignId('issued_by_user_id'): speichert, Lehrperson welche den Gutschein erstellt hat","foreignId('redeemed_by_user_id'): speichert, welche Lehrperson den Gutschein beim Einlösen gescannt/eingelöst hat.","foreignId('student_id'): Gutschein wird Schüler zugeordnet","id: standardmäßiger Primärschlüssel","issued_at: Zeitpunkt der Ausstellung","Jeder Gutschein hat eine Nummer was unique ist und ist eindeutig einem student zugeordnet.","pdf_path: Speicherort der generierten PDF-Datei","pending: noch nicht genehmigt //standard","reason_custom: Begründungstext, warum custom-Template (optional)","redeemed_at: Zeitpunkt der Einlösung","redeemed: einglöst","rejected: abgelehnt","sent_at: Zeitpunkt der Absendung (E-Mail)","sent: per E-Mail verschickt","status: Status von Gutschein:","student_class: speichert Klasse des Schülers","template: speichert das ausgewählte Template (excellent_success, good_success, event_help, custom)","timestamps: Erstellung und Änderung in Datenbank (created_at und updated_at)","type: Art des Gutscheins (day, afternoon, hour)","valid_school_year: Jahr, bis zu dem Gutschein gültig ist"]},{"l":"Voucher Model","p":["Weiters habe ich das voucher-Model bearbeitet. Zurerst habe ich guarded oben hinzugefügt, damit ich später bestimmen kann was nicht ausgefüllt werden darf. guarded ist das Gegenstück zu fillable.","Die unten abgebildete Funktion sorgt dafür, dass jeder Gutschein eine UUID-Nummer bekommt, wenn er gespeichert wird:","booted ist Laravel Funktion, welche automatisch ausgeführt wird, wenn Model geladen wird. Kurz bevor ein Gutschein erstellt wird, wird geprüft ob dieser Gutschein schon Nummer hat. Wenn er noch keine Nummer hat wird durch Str::uuid() eine erstellt.","Im Voucher-Model habe ich Beziehungen definiert, damit ein Gutschein automatisch mit dem zugehörigen Schüler und den beteiligten Personen verknüpft ist. Über student() wird der Schüler geladen über student_id. Zusätzlich wird gespeichert, welche Lehrperson den Gutschein erstellt issued_by_user_id, wer ihn genehmigt approved_by_user_id und wer ihn eingelöst redeemed_by_user_id hat.","Somit steht meine DB-Struktur glaube ich grundsätzlich mal.","Beim Git-Push waren ein paar Fehlermeldungen, die von Tests kommen. Deshalb habe ich in tests.yml vorübergehend die php artisan tests auskommentiert:","Nach Absprache mit Herrn Professor Rasser:","in Migration create_voucher den Wert $table-string('valid_school_year'); entfernen, weil eh $table-date('expires_at')-nullable(); vorhanden ist","$table-enum('logo_variant', ['logo_hak', 'logo_hlp'])-default('logo_hak'); // Logoauswahl das soll ebenso entfernt werden, denn es sind standardmäßig beide Logos (Hak und HLP) im Header oben also beide Logos, aber es soll die Funktion geben - das wenn ein neues Logo entstanden ist, es man austauschen kann","Klasse ganz weglassen"]}]]